import{_ as j,a as J}from"./babel-B-8tVzRs.js";import{t as e}from"./lezer-aZIHYdwg.js";import{E as d,H as P,s as w,c as Q,d as X,a as Y,h as Z,f as $,b as ee,l as te,e as ae,g as re,i as ie,j as oe,k as ne,m as se,n as le,o as T,p as ce,q as fe,r as ue,t as ge,u as he,v as de,w as me,x as pe,y as be,z as ye,A as U,B as ke,C as Se,D as ve,S as xe,F as Ce}from"./codemirror-HgbMJCZm.js";import{r as f,j as Ne}from"./react-BCQsROhv.js";var _=i=>{var{theme:t,settings:a={},styles:o=[]}=i,r={".cm-gutters":{}},c={};a.background&&(c.backgroundColor=a.background),a.backgroundImage&&(c.backgroundImage=a.backgroundImage),a.foreground&&(c.color=a.foreground),(a.background||a.foreground)&&(r["&"]=c),a.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:a.fontFamily}),a.gutterBackground&&(r[".cm-gutters"].backgroundColor=a.gutterBackground),a.gutterForeground&&(r[".cm-gutters"].color=a.gutterForeground),a.gutterBorder&&(r[".cm-gutters"].borderRightColor=a.gutterBorder),a.caret&&(r[".cm-content"]={caretColor:a.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:a.caret});var l={};a.gutterActiveForeground&&(l.color=a.gutterActiveForeground),a.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:a.lineHighlight},l.backgroundColor=a.lineHighlight),r[".cm-activeLineGutter"]=l,a.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:a.selection+" !important"}),a.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:a.selectionMatch});var g=d.theme(r,{dark:t==="dark"}),s=P.define(o),m=[g,w(s)];return m},Ee={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},Be=i=>{var{theme:t="light",settings:a={},styles:o=[]}=i||{};return _({theme:t,settings:j({},Ee,a),styles:[{tag:[e.standard(e.tagName),e.tagName],color:"#116329"},{tag:[e.comment,e.bracket],color:"#6a737d"},{tag:[e.className,e.propertyName],color:"#6f42c1"},{tag:[e.variableName,e.attributeName,e.number,e.operator],color:"#005cc5"},{tag:[e.keyword,e.typeName,e.typeOperator,e.typeName],color:"#d73a49"},{tag:[e.string,e.meta,e.regexp],color:"#032f62"},{tag:[e.name,e.quote],color:"#22863a"},{tag:[e.heading,e.strong],color:"#24292e",fontWeight:"bold"},{tag:[e.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[e.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[e.atom,e.bool,e.special(e.variableName)],color:"#e36209"},{tag:[e.url,e.escape,e.regexp,e.link],color:"#032f62"},{tag:e.link,textDecoration:"underline"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.invalid,color:"#cb2431"},...o]})};Be();var Fe={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},We=i=>{var{theme:t="dark",settings:a={},styles:o=[]}=i||{};return _({theme:t,settings:j({},Fe,a),styles:[{tag:[e.standard(e.tagName),e.tagName],color:"#7ee787"},{tag:[e.comment,e.bracket],color:"#8b949e"},{tag:[e.className,e.propertyName],color:"#d2a8ff"},{tag:[e.variableName,e.attributeName,e.number,e.operator],color:"#79c0ff"},{tag:[e.keyword,e.typeName,e.typeOperator,e.typeName],color:"#ff7b72"},{tag:[e.string,e.meta,e.regexp],color:"#a5d6ff"},{tag:[e.name,e.quote],color:"#7ee787"},{tag:[e.heading,e.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[e.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[e.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[e.atom,e.bool,e.special(e.variableName)],color:"#ffab70"},{tag:e.link,textDecoration:"underline"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.invalid,color:"#f97583"},...o]})};We();var z=function(t){t===void 0&&(t={});var{crosshairCursor:a=!1}=t,o=[];t.closeBracketsKeymap!==!1&&(o=o.concat(Q)),t.defaultKeymap!==!1&&(o=o.concat(X)),t.searchKeymap!==!1&&(o=o.concat(Y)),t.historyKeymap!==!1&&(o=o.concat(Z)),t.foldKeymap!==!1&&(o=o.concat($)),t.completionKeymap!==!1&&(o=o.concat(ee)),t.lintKeymap!==!1&&(o=o.concat(te));var r=[];return t.lineNumbers!==!1&&r.push(ae()),t.highlightActiveLineGutter!==!1&&r.push(re()),t.highlightSpecialChars!==!1&&r.push(ie()),t.history!==!1&&r.push(oe()),t.foldGutter!==!1&&r.push(ne()),t.drawSelection!==!1&&r.push(se()),t.dropCursor!==!1&&r.push(le()),t.allowMultipleSelections!==!1&&r.push(T.allowMultipleSelections.of(!0)),t.indentOnInput!==!1&&r.push(ce()),t.syntaxHighlighting!==!1&&r.push(w(fe,{fallback:!0})),t.bracketMatching!==!1&&r.push(ue()),t.closeBrackets!==!1&&r.push(ge()),t.autocompletion!==!1&&r.push(he()),t.rectangularSelection!==!1&&r.push(de()),a!==!1&&r.push(me()),t.highlightActiveLine!==!1&&r.push(pe()),t.highlightSelectionMatches!==!1&&r.push(be()),t.tabSize&&typeof t.tabSize=="number"&&r.push(ye.of(" ".repeat(t.tabSize))),r.concat([U.of(o.flat())]).filter(Boolean)},He=d.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Le=function(t){t===void 0&&(t={});var{indentWithTab:a=!0,editable:o=!0,readOnly:r=!1,theme:c="light",placeholder:l="",basicSetup:g=!0}=t,s=[];switch(a&&s.unshift(U.of([ke])),g&&(typeof g=="boolean"?s.unshift(z()):s.unshift(z(g))),l&&s.unshift(Se(l)),c){case"light":s.push(He);break;case"dark":s.push(ve);break;case"none":break;default:s.push(c);break}return o===!1&&s.push(d.editable.of(!1)),r&&s.push(T.readOnly.of(!0)),[...s]},Oe=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(t=>i.state.sliceDoc(t.from,t.to)),selectedText:i.state.selection.ranges.some(t=>!t.empty)}),R=Ce.define(),De=[];function Ke(i){var{value:t,selection:a,onChange:o,onStatistics:r,onCreateEditor:c,onUpdate:l,extensions:g=De,autoFocus:s,theme:m="light",height:C=null,minHeight:p=null,maxHeight:N=null,width:E=null,minWidth:B=null,maxWidth:F=null,placeholder:W="",editable:H=!0,readOnly:L=!1,indentWithTab:O=!0,basicSetup:D=!0,root:A,initialState:S}=i,[b,K]=f.useState(),[n,h]=f.useState(),[y,k]=f.useState(),I=d.theme({"&":{height:C,minHeight:p,maxHeight:N,width:E,minWidth:B,maxWidth:F},"& .cm-scroller":{height:"100% !important"}}),G=d.updateListener.of(u=>{if(u.docChanged&&typeof o=="function"&&!u.transactions.some(V=>V.annotation(R))){var x=u.state.doc,M=x.toString();o(M,u)}r&&r(Oe(u))}),q=Le({theme:m,editable:H,readOnly:L,placeholder:W,indentWithTab:O,basicSetup:D}),v=[G,I,...q];return l&&typeof l=="function"&&v.push(d.updateListener.of(l)),v=v.concat(g),f.useEffect(()=>{if(b&&!y){var u={doc:t,selection:a,extensions:v},x=S?T.fromJSON(S.json,u,S.fields):T.create(u);if(k(x),!n){var M=new d({state:x,parent:b,root:A});h(M),c&&c(M,x)}}return()=>{n&&(k(void 0),h(void 0))}},[b,y]),f.useEffect(()=>K(i.container),[i.container]),f.useEffect(()=>()=>{n&&(n.destroy(),h(void 0))},[n]),f.useEffect(()=>{s&&n&&n.focus()},[s,n]),f.useEffect(()=>{n&&n.dispatch({effects:xe.reconfigure.of(v)})},[m,g,C,p,N,E,B,F,W,H,L,O,D,o,l]),f.useEffect(()=>{if(t!==void 0){var u=n?n.state.doc.toString():"";n&&t!==u&&n.dispatch({changes:{from:0,to:u.length,insert:t||""},annotations:[R.of(!0)]})}},[t,n]),{state:y,setState:k,view:n,setView:h,container:b,setContainer:K}}var Me=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Te=f.forwardRef((i,t)=>{var{className:a,value:o="",selection:r,extensions:c=[],onChange:l,onStatistics:g,onCreateEditor:s,onUpdate:m,autoFocus:C,theme:p="light",height:N,minHeight:E,maxHeight:B,width:F,minWidth:W,maxWidth:H,basicSetup:L,placeholder:O,indentWithTab:D,editable:A,readOnly:S,root:b,initialState:K}=i,n=J(i,Me),h=f.useRef(null),{state:y,view:k,container:I}=Ke({container:h.current,root:b,value:o,autoFocus:C,theme:p,height:N,minHeight:E,maxHeight:B,width:F,minWidth:W,maxWidth:H,basicSetup:L,placeholder:O,indentWithTab:D,editable:A,readOnly:S,selection:r,onChange:l,onStatistics:g,onCreateEditor:s,onUpdate:m,extensions:c,initialState:K});if(f.useImperativeHandle(t,()=>({editor:h.current,state:y,view:k}),[h,I,y,k]),typeof o!="string")throw new Error("value must be typeof string but got "+typeof o);var G=typeof p=="string"?"cm-theme-"+p:"cm-theme";return Ne.jsx("div",j({ref:h,className:""+G+(a?" "+a:"")},n))});Te.displayName="CodeMirror";export{Te as R,We as g};
